# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2021-01-30 15:34-0300\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=CHARSET\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:1
#, no-wrap
msgid "---\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:4
msgid "title: LDAP Authentication authors:"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:9
#, no-wrap
msgid ""
"author: Toby Burress\n"
"email: kurin@causa-sui.net\n"
"copyright: 2007-2008 The FreeBSD Documentation Project\n"
"releaseinfo: \"$FreeBSD$\" \n"
"trademarks: [\"freebsd\", \"general\"]\n"
"---\n"
msgstr ""

#. type: Title =
#: documentation/content/en/articles/ldap-auth/_index.adoc:11
#, no-wrap
msgid "LDAP Authentication"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:23
msgid "Abstract"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:25
msgid ""
"This document is intended as a guide for the configuration of an LDAP server "
"(principally an OpenLDAP server) for authentication on FreeBSD. This is "
"useful for situations where many servers need the same user accounts, for "
"example as a replacement for NIS."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:27
msgid "'''"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:29
msgid "toc::[]"
msgstr ""

#. type: Title ==
#: documentation/content/en/articles/ldap-auth/_index.adoc:31
#, no-wrap
msgid "Preface"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:34
msgid ""
"This document is intended to give the reader enough of an understanding of "
"LDAP to configure an LDAP server. This document will attempt to provide an "
"explanation of package:net/nss_ldap[] and package:security/pam_ldap[] for "
"use with client machines services for use with the LDAP server."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:36
msgid ""
"When finished, the reader should be able to configure and deploy a FreeBSD "
"server that can host an LDAP directory, and to configure and deploy a "
"FreeBSD server which can authenticate against an LDAP directory."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:38
msgid ""
"This article is not intended to be an exhaustive account of the security, "
"robustness, or best practice considerations for configuring LDAP or the "
"other services discussed herein. While the author takes care to do "
"everything correctly, they do not address security issues beyond a general "
"scope. This article should be considered to lay the theoretical groundwork "
"only, and any actual implementation should be accompanied by careful "
"requirement analysis."
msgstr ""

#. type: Title ==
#: documentation/content/en/articles/ldap-auth/_index.adoc:40
#, no-wrap
msgid "Configuring LDAP"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:43
msgid ""
"LDAP stands for \"Lightweight Directory Access Protocol\" and is a subset of "
"the X.500 Directory Access Protocol. Its most recent specifications are in "
"http://www.ietf.org/rfc/rfc4510.txt[RFC4510] and friends. Essentially it is "
"a database that expects to be read from more often than it is written to."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:45
msgid ""
"The LDAP server http://www.openldap.org/[OpenLDAP] will be used in the "
"examples in this document; while the principles here should be generally "
"applicable to many different servers, most of the concrete administration is "
"OpenLDAP-specific. There are several server versions in ports, for example "
"package:net/openldap24-server[]. Client servers will need the corresponding "
"package:net/openldap24-client[] libraries."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:47
msgid ""
"There are (basically) two areas of the LDAP service which need "
"configuration. The first is setting up a server to receive connections "
"properly, and the second is adding entries to the server's directory so that "
"FreeBSD tools know how to interact with it."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:49
#, no-wrap
msgid "Setting Up the Server for Connections"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:54
msgid ""
"This section is specific to OpenLDAP. If you are using another server, you "
"will need to consult that server's documentation."
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:57 documentation/content/en/articles/ldap-auth/_index.adoc:62
#, no-wrap
msgid "Installing OpenLDAP"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:60
msgid "First, install OpenLDAP:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:70
#, no-wrap
msgid ""
"# cd /usr/ports/net/openldap24-server\n"
"# make install clean\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:75
msgid ""
"This installs the `slapd` and `slurpd` binaries, along with the required "
"OpenLDAP libraries."
msgstr ""

#. type: Title ====
#: documentation/content/en/articles/ldap-auth/_index.adoc:77
#, no-wrap
msgid "Configuring OpenLDAP"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:80
msgid "Next we must configure OpenLDAP."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:82
msgid ""
"You will want to require encryption in your connections to the LDAP server; "
"otherwise your users' passwords will be transferred in plain text, which is "
"considered insecure. The tools we will be using support two very similar "
"kinds of encryption, SSL and TLS."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:84
msgid ""
"TLS stands for \"Transportation Layer Security\". Services that employ TLS "
"tend to connect on the _same_ ports as the same services without TLS; thus "
"an SMTP server which supports TLS will listen for connections on port 25, "
"and an LDAP server will listen on 389."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:86
msgid ""
"SSL stands for \"Secure Sockets Layer\", and services that implement SSL do "
"_not_ listen on the same ports as their non-SSL counterparts. Thus SMTPS "
"listens on port 465 (not 25), HTTPS listens on 443, and LDAPS on 636."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:88
msgid ""
"The reason SSL uses a different port than TLS is because a TLS connection "
"begins as plain text, and switches to encrypted traffic after the `STARTTLS` "
"directive. SSL connections are encrypted from the beginning. Other than that "
"there are no substantial differences between the two."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:92
msgid "We will adjust OpenLDAP to use TLS, as SSL is considered deprecated."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:95
msgid ""
"Once OpenLDAP is installed via ports, the following configuration parameters "
"in [.filename]#/usr/local/etc/openldap/slapd.conf# will enable TLS:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:99
#, no-wrap
msgid "security ssf=128\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:103
#, no-wrap
msgid ""
"TLSCertificateFile /path/to/your/cert.crt\n"
"TLSCertificateKeyFile /path/to/your/cert.key\n"
"TLSCACertificateFile /path/to/your/cacert.crt\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:106
msgid ""
"Here, `ssf=128` tells OpenLDAP to require 128-bit encryption for all "
"connections, both search and update. This parameter may be configured based "
"on the security needs of your site, but rarely you need to weaken it, as "
"most LDAP client libraries support strong encryption."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:108
msgid ""
"The [.filename]#cert.crt#, [.filename]#cert.key#, and "
"[.filename]#cacert.crt# files are necessary for clients to authenticate "
"_you_ as the valid LDAP server. If you simply want a server that runs, you "
"can create a self-signed certificate with OpenSSL:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:110
#, no-wrap
msgid "Generating an RSA Key"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:121
#, no-wrap
msgid ""
"% openssl genrsa -out cert.key 1024\n"
"Generating RSA private key, 1024 bit long modulus\n"
"....................++++++\n"
"...++++++\n"
"e is 65537 (0x10001)\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:123
#, no-wrap
msgid "% openssl req -new -key cert.key -out cert.csr\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:128
msgid ""
"At this point you should be prompted for some values. You may enter whatever "
"values you like; however, it is important the \"Common Name\" value be the "
"fully qualified domain name of the OpenLDAP server. In our case, and the "
"examples here, the server is _server.example.org_. Incorrectly setting this "
"value will cause clients to fail when making connections. This can the cause "
"of great frustration, so ensure that you follow these steps closely."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:130
msgid "Finally, the certificate signing request needs to be signed:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:132
#, no-wrap
msgid "Self-signing the Certificate"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:142
#, no-wrap
msgid ""
"% openssl x509 -req -in cert.csr -days 365 -signkey cert.key -out cert.crt\n"
"Signature ok\n"
"subject=/C=AU/ST=Some-State/O=Internet Widgits Pty Ltd\n"
"Getting Private key\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:147
msgid ""
"This will create a self-signed certificate that can be used for the "
"directives in [.filename]#slapd.conf#, where [.filename]#cert.crt# and "
"[.filename]#cacert.crt# are the same file. If you are going to use many "
"OpenLDAP servers (for replication via `slurpd`) you will want to see "
"<<ssl-ca>> to generate a CA key and use it to sign individual server "
"certificates."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:149
msgid "Once this is done, put the following in [.filename]#/etc/rc.conf#:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:153
#, no-wrap
msgid "slapd_enable=\"YES\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:156
msgid ""
"Then run `/usr/local/etc/rc.d/slapd start`. This should start "
"OpenLDAP. Confirm that it is listening on 389 with"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:161
#, no-wrap
msgid ""
"% sockstat -4 -p 389\n"
"ldap     slapd      3261  7  tcp4   *:389                 *:*\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/articles/ldap-auth/_index.adoc:164
#, no-wrap
msgid "Configuring the Client"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:167
msgid ""
"Install the package:net/openldap24-client[] port for the OpenLDAP "
"libraries. The client machines will always have OpenLDAP libraries since "
"that is all package:security/pam_ldap[] and package:net/nss_ldap[] support, "
"at least for the moment."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:169
msgid ""
"The configuration file for the OpenLDAP libraries is "
"[.filename]#/usr/local/etc/openldap/ldap.conf#. Edit this file to contain "
"the following values:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:176
#, no-wrap
msgid ""
"base dc=example,dc=org\n"
"uri ldap://server.example.org/\n"
"ssl start_tls\n"
"tls_cacert /path/to/your/cacert.crt\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:181
msgid ""
"It is important that your clients have access to [.filename]#cacert.crt#, "
"otherwise they will not be able to connect."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:186
msgid ""
"There are two files called [.filename]#ldap.conf#. The first is this file, "
"which is for the OpenLDAP libraries and defines how to talk to the "
"server. The second is [.filename]#/usr/local/etc/ldap.conf#, and is for "
"pam_ldap."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:189
msgid ""
"At this point you should be able to run `ldapsearch -Z` on the client "
"machine; `-Z` means \"use TLS\". If you encounter an error, then something "
"is configured wrong; most likely it is your certificates. Use "
"man:openssl[1]'s `s_client` and `s_server` to ensure you have them "
"configured and signed properly."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:191
#, no-wrap
msgid "Entries in the Database"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:194
msgid ""
"Authentication against an LDAP directory is generally accomplished by "
"attempting to bind to the directory as the connecting user. This is done by "
"establishing a \"simple\" bind on the directory with the user name "
"supplied. If there is an entry with the `uid` equal to the user name and "
"that entry's `userPassword` attribute matches the password supplied, then "
"the bind is successful."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:196
msgid ""
"The first thing we have to do is figure out is where in the directory our "
"users will live."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:198
msgid ""
"The base entry for our database is `dc=example,dc=org`. The default location "
"for users that most clients seem to expect is something like "
"`ou=people,_base_`, so that is what will be used here. However keep in mind "
"that this is configurable."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:200
msgid "So the ldif entry for the `people` organizational unit will look like:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:207
#, no-wrap
msgid ""
"dn: ou=people,dc=example,dc=org\n"
"objectClass: top\n"
"objectClass: organizationalUnit\n"
"ou: people\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:210
msgid "All users will be created as subentries of this organizational unit."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:212
msgid ""
"Some thought might be given to the object class your users will belong "
"to. Most tools by default will use `people`, which is fine if you simply "
"want to provide entries against which to authenticate. However, if you are "
"going to store user information in the LDAP database as well, you will "
"probably want to use `inetOrgPerson`, which has many useful attributes. In "
"either case, the relevant schemas need to be loaded in "
"[.filename]#slapd.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:214
msgid ""
"For this example we will use the `person` object class. If you are using "
"`inetOrgPerson`, the steps are basically identical, except that the `sn` "
"attribute is required."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:216
msgid "To add a user `testuser`, the ldif would be:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:230
#, no-wrap
msgid ""
"dn: uid=tuser,ou=people,dc=example,dc=org\n"
"objectClass: person\n"
"objectClass: posixAccount\n"
"objectClass: shadowAccount\n"
"objectClass: top\n"
"uidNumber: 10000\n"
"gidNumber: 10000\n"
"homeDirectory: /home/tuser\n"
"loginShell: /bin/csh\n"
"uid: tuser\n"
"cn: tuser\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:233
msgid ""
"I start my LDAP users' UIDs at 10000 to avoid collisions with system "
"accounts; you can configure whatever number you wish here, as long as it is "
"less than 65536."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:235
msgid ""
"We also need group entries. They are as configurable as user entries, but we "
"will use the defaults below:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:242
#, no-wrap
msgid ""
"dn: ou=groups,dc=example,dc=org\n"
"objectClass: top\n"
"objectClass: organizationalUnit\n"
"ou: groups\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:248
#, no-wrap
msgid ""
"dn: cn=tuser,ou=groups,dc=example,dc=org\n"
"objectClass: posixGroup\n"
"objectClass: top\n"
"gidNumber: 10000\n"
"cn: tuser\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:251
msgid ""
"To enter these into your database, you can use `slapadd` or `ldapadd` on a "
"file containing these entries. Alternatively, you can use "
"package:sysutils/ldapvi[]."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:253
msgid ""
"The `ldapsearch` utility on the client machine should now return these "
"entries. If it does, your database is properly configured to be used as an "
"LDAP authentication server."
msgstr ""

#. type: Title ==
#: documentation/content/en/articles/ldap-auth/_index.adoc:255
#, no-wrap
msgid "Client Configuration"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:258
msgid ""
"The client should already have OpenLDAP libraries from "
"<<ldap-connect-client>>, but if you are installing several client machines "
"you will need to install package:net/openldap24-client[] on each of them."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:260
msgid ""
"FreeBSD requires two ports to be installed to authenticate against an LDAP "
"server, package:security/pam_ldap[] and package:net/nss_ldap[]."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:262
#, no-wrap
msgid "Authentication"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:265
msgid ""
"package:security/pam_ldap[] is configured via "
"[.filename]#/usr/local/etc/ldap.conf#."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:269
msgid ""
"This is a _different file_ than the OpenLDAP library functions' "
"configuration file, [.filename]#/usr/local/etc/openldap/ldap.conf#; however, "
"it takes many of the same options; in fact it is a superset of that "
"file. For the rest of this section, references to [.filename]#ldap.conf# "
"will mean [.filename]#/usr/local/etc/ldap.conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:272
msgid ""
"Thus, we will want to copy all of our original configuration parameters from "
"[.filename]#openldap/ldap.conf# to the new [.filename]#ldap.conf#. Once this "
"is done, we want to tell package:security/pam_ldap[] what to look for on the "
"directory server."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:274
msgid ""
"We are identifying our users with the `uid` attribute. To configure this "
"(though it is the default), set the `pam_login_attribute` directive in "
"[.filename]#ldap.conf#:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:276
#, no-wrap
msgid "Setting `pam_login_attribute`"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:283
#, no-wrap
msgid "pam_login_attribute uid\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:288
msgid ""
"With this set, package:security/pam_ldap[] will search the entire LDAP "
"directory under `base` for the value `uid=_username_`. If it finds one and "
"only one entry, it will attempt to bind as that user with the password it "
"was given. If it binds correctly, then it will allow access. Otherwise it "
"will fail."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:290
msgid ""
"Users whose shell is not in [.filename]#/etc/shells# will not be able to log "
"in. This is particularly important when Bash is set as the user shell on the "
"LDAP server. Bash is not included with a default installation of "
"FreeBSD. When installed from a package or port, it is located at "
"[.filename]#/usr/local/bin/bash#. Verify that the path to the shell on the "
"server is set correctly:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:294
#, no-wrap
msgid "% getent passwd username\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:297
msgid ""
"There are two choices when the output shows `/bin/bash` in the last "
"column. The first is to change the user's entry on the LDAP server to "
"[.filename]#/usr/local/bin/bash#. The second option is to create a symlink "
"on the LDAP client computer so Bash is found at the correct location:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:301
#, no-wrap
msgid "# ln -s /usr/local/bin/bash /bin/bash\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:304
msgid ""
"Make sure that [.filename]#/etc/shells# contains entries for both "
"`/usr/local/bin/bash` and `/bin/bash`. The user will then be able to log in "
"to the system with Bash as their shell."
msgstr ""

#. type: Title ====
#: documentation/content/en/articles/ldap-auth/_index.adoc:306
#, no-wrap
msgid "PAM"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:309
msgid ""
"PAM, which stands for \"Pluggable Authentication Modules\", is the method by "
"which FreeBSD authenticates most of its sessions. To tell FreeBSD we wish to "
"use an LDAP server, we will have to add a line to the appropriate PAM file."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:311
msgid ""
"Most of the time the appropriate PAM file is [.filename]#/etc/pam.d/sshd#, "
"if you want to use SSH (remember to set the relevant options in "
"[.filename]#/etc/ssh/sshd_config#, otherwise SSH will not use PAM)."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:313
msgid "To use PAM for authentication, add the line"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:317
#, no-wrap
msgid "auth  sufficient  /usr/local/lib/pam_ldap.so  no_warn\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:320
msgid ""
"Exactly where this line shows up in the file and which options appear in the "
"fourth column determine the exact behavior of the authentication mechanism; "
"see man:pam[d]"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:322
msgid ""
"With this configuration you should be able to authenticate a user against an "
"LDAP directory. PAM will perform a bind with your credentials, and if "
"successful will tell SSH to allow access."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:324
msgid ""
"However it is not a good idea to allow _every_ user in the directory into "
"_every_ client machine. With the current configuration, all that a user "
"needs to log into a machine is an LDAP entry. Fortunately there are a few "
"ways to restrict user access."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:326
msgid ""
"[.filename]#ldap.conf# supports a `pam_groupdn` directive; every account "
"that connects to this machine needs to be a member of the group specified "
"here. For example, if you have"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:330
#, no-wrap
msgid "pam_groupdn cn=servername,ou=accessgroups,dc=example,dc=org\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:333
msgid ""
"in [.filename]#ldap.conf#, then only members of that group will be able to "
"log in. There are a few things to bear in mind, however."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:335
msgid ""
"Members of this group are specified in one or more `memberUid` attributes, "
"and each attribute must have the full distinguished name of the member. So "
"`memberUid: someuser` will not work; it must be:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:339
#, no-wrap
msgid "memberUid: uid=someuser,ou=people,dc=example,dc=org\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:342
msgid ""
"Additionally, this directive is not checked in PAM during authentication, it "
"is checked during account management, so you will need a second line in your "
"PAM files under `account`. This will require, in turn, _every_ user to be "
"listed in the group, which is not necessarily what we want. To avoid "
"blocking users that are not in LDAP, you should enable the "
"`ignore_unknown_user` attribute. Finally, you should set the "
"`ignore_authinfo_unavail` option so that you are not locked out of every "
"computer when the LDAP server is unavailable."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:344
msgid "Your [.filename]#pam.d/sshd# might then end up looking like this:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:346
#, no-wrap
msgid "Sample [.filename]#pam.d/sshd#"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:357
#, no-wrap
msgid ""
"auth            required        pam_nologin.so          no_warn\n"
"auth            sufficient      pam_opie.so             no_warn "
"no_fake_prompts\n"
"auth            requisite       pam_opieaccess.so       no_warn "
"allow_local\n"
"auth            sufficient      /usr/local/lib/pam_ldap.so      no_warn\n"
"auth            required        pam_unix.so             no_warn "
"try_first_pass\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:360
#, no-wrap
msgid ""
"account         required        pam_login_access.so\n"
"account         required        /usr/local/lib/pam_ldap.so      no_warn "
"ignore_authinfo_unavail ignore_unknown_user\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:367
msgid ""
"Since we are adding these lines specifically to [.filename]#pam.d/sshd#, "
"this will only have an effect on SSH sessions. LDAP users will be unable to "
"log in at the console. To change this behavior, examine the other files in "
"[.filename]#/etc/pam.d# and modify them accordingly."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:370
#, no-wrap
msgid "Name Service Switch"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:373
msgid ""
"NSS is the service that maps attributes to names. So, for example, if a file "
"is owned by user `1001`, an application will query NSS for the name of "
"`1001`, and it might get `bob` or `ted` or whatever the user's name is."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:375
msgid ""
"Now that our user information is kept in LDAP, we need to tell NSS to look "
"there when queried."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:377
msgid ""
"The package:net/nss_ldap[] port does this. It uses the same configuration "
"file as package:security/pam_ldap[], and should not need any extra "
"parameters once it is installed. Instead, what is left is simply to edit "
"[.filename]#/etc/nsswitch.conf# to take advantage of the directory. Simply "
"replace the following lines:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:382
#, no-wrap
msgid ""
"group: compat\n"
"passwd: compat\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:385
msgid "with"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:390
#, no-wrap
msgid ""
"group: files ldap\n"
"passwd: files ldap\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:393
msgid "This will allow you to map usernames to UIDs and UIDs to usernames."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:395
msgid "Congratulations! You should now have working LDAP authentication."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:397
#, no-wrap
msgid "Caveats"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:400
msgid ""
"Unfortunately, as of the time this was written FreeBSD did not support "
"changing user passwords with man:passwd[1]. As a result of this, most "
"administrators are left to implement a solution themselves. I provide some "
"examples here. Note that if you write your own password change script, there "
"are some security issues you should be made aware of; see "
"<<security-passwd>>"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:402
#, no-wrap
msgid "Shell Script for Changing Passwords"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:409
#, no-wrap
msgid "#!/bin/sh\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:415
#, no-wrap
msgid ""
"stty -echo\n"
"read -p \"Old Password: \" oldp; echo\n"
"read -p \"New Password: \" np1; echo\n"
"read -p \"Retype New Password: \" np2; echo\n"
"stty echo\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:420
#, no-wrap
msgid ""
"if [ \"$np1\" != \"$np2\" ]; then\n"
"  echo \"Passwords do not match.\"\n"
"  exit 1\n"
"fi\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:425
#, no-wrap
msgid ""
"ldappasswd -D uid=\"$USER\",ou=people,dc=example,dc=org \\\n"
"  -w \"$oldp\" \\\n"
"  -a \"$oldp\" \\\n"
"  -s \"$np1\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:433
msgid ""
"This script does hardly any error checking, but more important it is very "
"cavalier about how it stores your passwords. If you do anything like this, "
"at least adjust the `security.bsd.see_other_uids` sysctl value:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:437
#, no-wrap
msgid "# sysctl security.bsd.see_other_uids=0\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:442
msgid ""
"A more flexible (and probably more secure) approach can be used by writing a "
"custom program, or even a web interface. The following is part of a Ruby "
"library that can change LDAP passwords. It sees use both on the command "
"line, and on the web."
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:444
#, no-wrap
msgid "Ruby Script for Changing Passwords"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:454
#, no-wrap
msgid ""
"require 'ldap'\n"
"require 'base64'\n"
"require 'digest'\n"
"require 'password' # ruby-password\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:457
#, no-wrap
msgid ""
"ldap_server = \"ldap.example.org\"\n"
"luser = \"uid=#{ENV['USER']},ou=people,dc=example,dc=org\"\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:462
#, no-wrap
msgid ""
"# get the new password, check it, and create a salted hash from it\n"
"def get_password\n"
"  pwd1 = Password.get(\"New Password: \")\n"
"  pwd2 = Password.get(\"Retype New Password: \")\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:465
#, no-wrap
msgid ""
"  raise if pwd1 != pwd2\n"
"  pwd1.check # check password strength\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:471
#, no-wrap
msgid ""
"  salt = rand.to_s.gsub(/0\\./, '')\n"
"  pass = pwd1.to_s\n"
"  hash = "
"\"{SSHA}\"+Base64.encode64(Digest::SHA1.digest(\"#{pass}#{salt}\")+salt).chomp!\n"
"  return hash\n"
"end\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:474
#, no-wrap
msgid ""
"oldp = Password.get(\"Old Password: \")\n"
"newp = get_password\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:477
#, no-wrap
msgid ""
"# We'll just replace it.  That we can bind proves that we either know\n"
"# the old password or are an admin.\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:481
#, no-wrap
msgid ""
"replace = LDAP::Mod.new(LDAP::LDAP_MOD_REPLACE | LDAP::LDAP_MOD_BVALUES,\n"
"                        \"userPassword\",\n"
"                        [newp])\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:486
#, no-wrap
msgid ""
"conn = LDAP::SSLConn.new(ldap_server, 389, true)\n"
"conn.set_option(LDAP::LDAP_OPT_PROTOCOL_VERSION, 3)\n"
"conn.bind(luser, oldp)\n"
"conn.modify(luser, [replace])\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:491
msgid ""
"Although not guaranteed to be free of security holes (the password is kept "
"in memory, for example) this is cleaner and more flexible than a simple `sh` "
"script."
msgstr ""

#. type: Title ==
#: documentation/content/en/articles/ldap-auth/_index.adoc:493
#, no-wrap
msgid "Security Considerations"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:496
msgid ""
"Now that your machines (and possibly other services) are authenticating "
"against your LDAP server, this server needs to be protected at least as well "
"as [.filename]#/etc/master.passwd# would be on a regular server, and "
"possibly even more so since a broken or cracked LDAP server would break "
"every client service."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:498
msgid ""
"Remember, this section is not exhaustive. You should continually review your "
"configuration and procedures for improvements."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:500
#, no-wrap
msgid "Setting Attributes Read-only"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:503
msgid ""
"Several attributes in LDAP should be read-only. If left writable by the "
"user, for example, a user could change his `uidNumber` attribute to `0` and "
"get `root` access!"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:505
msgid ""
"To begin with, the `userPassword` attribute should not be world-readable. By "
"default, anyone who can connect to the LDAP server can read this "
"attribute. To disable this, put the following in [.filename]#slapd.conf#:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:507
#, no-wrap
msgid "Hide Passwords"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:518 documentation/content/en/articles/ldap-auth/_index.adoc:542
#, no-wrap
msgid ""
"access to dn.subtree=\"ou=people,dc=example,dc=org\"\n"
"  attrs=userPassword\n"
"  by self write\n"
"  by anonymous auth\n"
"  by * none\n"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:522 documentation/content/en/articles/ldap-auth/_index.adoc:549
#, no-wrap
msgid ""
"access to *\n"
"  by self write\n"
"  by * read\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:527
msgid ""
"This will disallow reading of the `userPassword` attribute, while still "
"allowing users to change their own passwords."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:529
msgid ""
"Additionally, you'll want to keep users from changing some of their own "
"attributes. By default, users can change any attribute (except for those "
"which the LDAP schemas themselves deny changes), such as `uidNumber`. To "
"close this hole, modify the above to"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:531
#, no-wrap
msgid "Read-only Attributes"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:545
#, no-wrap
msgid ""
"access to attrs=homeDirectory,uidNumber,gidNumber\n"
"  by * read\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:554
msgid "This will stop users from being able to masquerade as other users."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:556
#, no-wrap
msgid "`root` Account Definition"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:559
msgid ""
"Often the `root` or manager account for the LDAP service will be defined in "
"the configuration file. OpenLDAP supports this, for example, and it works, "
"but it can lead to trouble if [.filename]#slapd.conf# is compromised. It may "
"be better to use this only to bootstrap yourself into LDAP, and then define "
"a `root` account there."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:561
msgid ""
"Even better is to define accounts that have limited permissions, and omit a "
"`root` account entirely. For example, users that can add or remove user "
"accounts are added to one group, but they cannot themselves change the "
"membership of this group. Such a security policy would help mitigate the "
"effects of a leaked password."
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:563 documentation/content/en/articles/ldap-auth/_index.adoc:568
#, no-wrap
msgid "Creating a Management Group"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:566
msgid ""
"Say you want your IT department to be able to change home directories for "
"users, but you do not want all of them to be able to add or remove "
"users. The way to do this is to add a group for these admins:"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:581
#, no-wrap
msgid ""
"dn: cn=homemanagement,dc=example,dc=org\n"
"objectClass: top\n"
"objectClass: posixGroup\n"
"cn: homemanagement\n"
"gidNumber: 121 # required for posixGroup\n"
"memberUid: uid=tuser,ou=people,dc=example,dc=org\n"
"memberUid: uid=user2,ou=people,dc=example,dc=org\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:586
msgid "And then change the permissions attributes in [.filename]#slapd.conf#:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:588
#, no-wrap
msgid "ACLs for a Home Directory Management Group"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:598
#, no-wrap
msgid ""
"access to dn.subtree=\"ou=people,dc=example,dc=org\"\n"
"  attr=homeDirectory\n"
"  by dn=\"cn=homemanagement,dc=example,dc=org\"\n"
"  dnattr=memberUid write\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:603
msgid "Now `tuser` and `user2` can change other users' home directories."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:605
msgid ""
"In this example we have given a subset of administrative power to certain "
"users without giving them power in other domains. The idea is that soon no "
"single user account has the power of a `root` account, but every power root "
"had is had by at least one user. The `root` account then becomes unnecessary "
"and can be removed."
msgstr ""

#. type: Title ===
#: documentation/content/en/articles/ldap-auth/_index.adoc:607
#, no-wrap
msgid "Password Storage"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:610
msgid ""
"By default OpenLDAP will store the value of the `userPassword` attribute as "
"it stores any other data: in the clear. Most of the time it is base 64 "
"encoded, which provides enough protection to keep an honest administrator "
"from knowing your password, but little else."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:612
msgid ""
"It is a good idea, then, to store passwords in a more secure format, such as "
"SSHA (salted SHA). This is done by whatever program you use to change users' "
"passwords."
msgstr ""

#. type: Title ==
#: documentation/content/en/articles/ldap-auth/_index.adoc:617
#, no-wrap
msgid "Useful Aids"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:620
msgid ""
"There are a few other programs that might be useful, particularly if you "
"have many users and do not want to configure everything manually."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:622
msgid ""
"package:security/pam_mkhomedir[] is a PAM module that always succeeds; its "
"purpose is to create home directories for users which do not have them. If "
"you have dozens of client servers and hundreds of users, it is much easier "
"to use this and set up skeleton directories than to prepare every home "
"directory."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:624
msgid ""
"package:sysutils/cpu[] is a man:pw[8]-like utility that can be used to "
"manage users in the LDAP directory. You can call it directly, or wrap "
"scripts around it. It can handle both TLS (with the `-x` flag) and SSL "
"(directly)."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:626
msgid ""
"package:sysutils/ldapvi[] is a great utility for editing LDAP values in an "
"LDIF-like syntax. The directory (or subsection of the directory) is "
"presented in the editor chosen by the `EDITOR` environment variable. This "
"makes it easy to enable large-scale changes in the directory without having "
"to write a custom tool."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:628
msgid ""
"package:security/openssh-portable[] has the ability to contact an LDAP "
"server to verify SSH keys. This is extremely nice if you have many servers "
"and do not want to copy your public keys across all of them."
msgstr ""

#. type: Title ==
#: documentation/content/en/articles/ldap-auth/_index.adoc:633
#, no-wrap
msgid "OpenSSL Certificates for LDAP"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:636
msgid ""
"If you are hosting two or more LDAP servers, you will probably not want to "
"use self-signed certificates, since each client will have to be configured "
"to work with each certificate. While this is possible, it is not nearly as "
"simple as creating your own certificate authority, and signing your servers' "
"certificates with that."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:638
msgid ""
"The steps here are presented as they are with very little attempt at "
"explaining what is going on-further explanation can be found in "
"man:openssl[1] and its friends."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:640
msgid ""
"To create a certificate authority, we simply need a self-signed certificate "
"and key. The steps for this again are"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:642
#, no-wrap
msgid "Creating a Certificate"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:651
#, no-wrap
msgid ""
"% openssl genrsa -out root.key 1024\n"
"% openssl req -new -key root.key -out root.csr\n"
"% openssl x509 -req -days 1024 -in root.csr -signkey root.key -out "
"root.crt\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:656
msgid ""
"These will be your root CA key and certificate. You will probably want to "
"encrypt the key and store it in a cool, dry place; anyone with access to it "
"can masquerade as one of your LDAP servers."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:658
msgid ""
"Next, using the first two steps above create a key "
"[.filename]#ldap-server-one.key# and certificate signing request "
"[.filename]#ldap-server-one.csr#. Once you sign the signing request with "
"[.filename]#root.key#, you will be able to use "
"[.filename]#ldap-server-one.*# on your LDAP servers."
msgstr ""

#. type: Plain text
#: documentation/content/en/articles/ldap-auth/_index.adoc:662
msgid ""
"Do not forget to use the fully qualified domain name for the \"common name\" "
"attribute when generating the certificate signing request; otherwise clients "
"will reject a connection with you, and it can be very tricky to diagnose."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:665
msgid "To sign the key, use `-CA` and `-CAkey` instead of `-signkey`:"
msgstr ""

#. type: Block title
#: documentation/content/en/articles/ldap-auth/_index.adoc:667
#, no-wrap
msgid "Signing as a Certificate Authority"
msgstr ""

#. type: delimited block .
#: documentation/content/en/articles/ldap-auth/_index.adoc:676
#, no-wrap
msgid ""
"% openssl x509 -req -days 1024 \\\n"
"-in ldap-server-one.csr -CA root.crt -CAkey root.key \\\n"
"-out ldap-server-one.crt\n"
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:681
msgid ""
"The resulting file will be the certificate that you can use on your LDAP "
"servers."
msgstr ""

#. type: delimited block =
#: documentation/content/en/articles/ldap-auth/_index.adoc:682
msgid ""
"Finally, for clients to trust all your servers, distribute "
"[.filename]#root.crt# (the __certificate__, not the key!) to each client, "
"and specify it in the `TLSCACertificateFile` directive in "
"[.filename]#ldap.conf#."
msgstr ""
